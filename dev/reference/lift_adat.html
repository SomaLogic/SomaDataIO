<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Lift an ADAT Between Assay Versions — lift_adat • SomaDataIO</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Lift an ADAT Between Assay Versions — lift_adat"><meta name="description" content='The SomaScan platform continually improves its technical processes
between assay versions. The primary change of interest is content expansion,
and other protocol changes may be implemented including: changing reagents,
liquid handling equipment, and well volumes.
Table of SomaScan assay versions:

VersionCommercial NameSize
V45k5284
v4.17k7596
v5.011k11083



However, for a given analyte, these technical upgrades can result
in minute measurement signal differences,
requiring a calibration (aka "lifting" or "bridging") to bring RFUs into a
comparable signal space.
This is accomplished by applying an analyte-specific scalar,
a linear transformation, to each analyte RFU measurement (column).
If you have an annotations file (*.xlsx) and wish to examine the
bridging scalars themselves, please see read_annotations().
Lifting between SomaScan versions no longer requires an
annotations file containing lifting scalars. We now enable users to pass
a bridge parameter, indicating the direction of the bridge.
For example, to "lift" between 11k -&amp;gt; 7k, you must be acting on
SomaScan data in 11k RFU space and would pass bridge = "11k_to_7k".
Likewise, 7k -&amp;gt; 5k requires bridge = "7k_to_5k".
Lastly, you may also lift directly from 11k -&amp;gt; 5k
(aka "double-bridge") with bridge = "11k_to_5k".
See below for all options for the bridge argument.'><meta property="og:description" content='The SomaScan platform continually improves its technical processes
between assay versions. The primary change of interest is content expansion,
and other protocol changes may be implemented including: changing reagents,
liquid handling equipment, and well volumes.
Table of SomaScan assay versions:

VersionCommercial NameSize
V45k5284
v4.17k7596
v5.011k11083



However, for a given analyte, these technical upgrades can result
in minute measurement signal differences,
requiring a calibration (aka "lifting" or "bridging") to bring RFUs into a
comparable signal space.
This is accomplished by applying an analyte-specific scalar,
a linear transformation, to each analyte RFU measurement (column).
If you have an annotations file (*.xlsx) and wish to examine the
bridging scalars themselves, please see read_annotations().
Lifting between SomaScan versions no longer requires an
annotations file containing lifting scalars. We now enable users to pass
a bridge parameter, indicating the direction of the bridge.
For example, to "lift" between 11k -&amp;gt; 7k, you must be acting on
SomaScan data in 11k RFU space and would pass bridge = "11k_to_7k".
Likewise, 7k -&amp;gt; 5k requires bridge = "7k_to_5k".
Lastly, you may also lift directly from 11k -&amp;gt; 5k
(aka "double-bridge") with bridge = "11k_to_5k".
See below for all options for the bridge argument.'><meta property="og:image" content="https://somalogic.github.io/SomaDataIO/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SomaDataIO</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">6.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/SomaDataIO.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/tips-loading-and-wrangling.html">Loading and Wrangling 'SomaScan'</a></li>
    <li><a class="dropdown-item" href="../articles/tips-safely-map-values.html">Safely Map Values via dplyr::left_join()</a></li>
    <li><a class="dropdown-item" href="../articles/tips-safely-rename-df.html">Safely Rename Data Frames</a></li>
    <li><a class="dropdown-item" href="../articles/tips-train-test-setup.html">Common train-test data setups</a></li>
    <li><a class="dropdown-item" href="../articles/cli-merge-tool.html">Command Line Merge Tool</a></li>
    <li><a class="dropdown-item" href="../articles/lifting-and-bridging.html">Lifting and Bridging SomaScan</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-workflows" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Workflows</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-workflows"><li><h6 class="dropdown-header" data-toc-skip>Difference Testing</h6></li>
    <li><a class="dropdown-item" href="../articles/stat-two-group-comparison.html">Two-Group Comparison</a></li>
    <li><a class="dropdown-item" href="../articles/stat-three-group-analysis-anova.html">ANOVA Three-Group Analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Making Predictions</h6></li>
    <li><a class="dropdown-item" href="../articles/stat-binary-classification.html">Binary Classification</a></li>
    <li><a class="dropdown-item" href="../articles/stat-linear-regression.html">Linear Regression</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-coming-soon" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Coming Soon</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-coming-soon"><li><h6 class="dropdown-header" data-toc-skip>SomaScan FAQs</h6></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Standard Process</h6></li>
    <li><h6 class="dropdown-header" data-toc-skip>Best Practices</h6></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Non-Standard Matrices</h6></li>
    <li><h6 class="dropdown-header" data-toc-skip>Limits of Detection (LoD)</h6></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SomaLogic/SomaDataIO/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Lift an ADAT Between Assay Versions</h1>
      <small class="dont-index">Source: <a href="https://github.com/SomaLogic/SomaDataIO/blob/main/R/lift-adat.R" class="external-link"><code>R/lift-adat.R</code></a></small>
      <div class="d-none name"><code>lift_adat.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The SomaScan platform continually improves its technical processes
between assay versions. The primary change of interest is content expansion,
and other protocol changes may be implemented including: changing reagents,
liquid handling equipment, and well volumes.</p>
<p>Table of SomaScan assay versions:</p>
<table class="table table"><tr><td><strong>Version</strong></td><td><strong>Commercial Name</strong></td><td><strong>Size</strong></td></tr><tr><td><code>V4</code></td><td>5k</td><td>5284</td></tr><tr><td><code>v4.1</code></td><td>7k</td><td>7596</td></tr><tr><td><code>v5.0</code></td><td>11k</td><td>11083</td></tr></table><p>However, for a given analyte, these technical upgrades can result
in minute measurement signal differences,
requiring a calibration (aka "lifting" or "bridging") to bring RFUs into a
comparable signal space.
This is accomplished by applying an analyte-specific scalar,
a linear transformation, to each analyte RFU measurement (column).
If you have an annotations file (<code>*.xlsx</code>) and wish to examine the
bridging scalars themselves, please see <code><a href="read_annotations.html">read_annotations()</a></code>.</p>
<p>Lifting between SomaScan versions no longer requires an
annotations file containing lifting scalars. We now enable users to pass
a <code>bridge</code> parameter, indicating the direction of the bridge.
For example, to "lift" between <code>11k</code> -&gt; <code>7k</code>, you <em>must</em> be acting on
SomaScan data in <code>11k</code> RFU space and would pass <code>bridge = "11k_to_7k"</code>.
Likewise, <code>7k</code> -&gt; <code>5k</code> requires <code>bridge = "7k_to_5k"</code>.
Lastly, you may also lift directly from <code>11k</code> -&gt; <code>5k</code>
(aka "double-bridge") with <code>bridge = "11k_to_5k"</code>.
See below for all options for the <code>bridge</code> argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lift_adat</span><span class="op">(</span></span>
<span>  <span class="va">adat</span>,</span>
<span>  bridge <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"11k_to_7k"</span>, <span class="st">"11k_to_5k"</span>, <span class="st">"7k_to_11k"</span>, <span class="st">"7k_to_5k"</span>, <span class="st">"5k_to_11k"</span>, <span class="st">"5k_to_7k"</span><span class="op">)</span>,</span>
<span>  anno.tbl <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is_lifted</span><span class="op">(</span><span class="va">adat</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-adat">adat<a class="anchor" aria-label="anchor" href="#arg-adat"></a></dt>
<dd><p>A <code>soma_adat</code> object (with intact attributes),
typically created using <code><a href="read_adat.html">read_adat()</a></code>.</p></dd>


<dt id="arg-bridge">bridge<a class="anchor" aria-label="anchor" href="#arg-bridge"></a></dt>
<dd><p>The direction of the lift (i.e. bridge).</p></dd>


<dt id="arg-anno-tbl">anno.tbl<a class="anchor" aria-label="anchor" href="#arg-anno-tbl"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a>. Please now
use the <code>bridge</code> argument.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>lift_adat()</code>: A "lifted" <code>soma_adat</code> object corresponding to
the scaling requested in the <code>bridge</code> parameter. RFU values are
rounded to 1 decimal place to match standard SomaScan delivery format.</p>
<p><code>is_lifted()</code>: Logical. Whether the RFU values in a <code>soma_adat</code>
have been lifted from its original signal space to a new signal space.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Matched samples across assay versions are used to calculate bridging
scalars. For each analyte, this scalar is computed as the ratio of
population <em>medians</em> across assay versions.
Please see the lifting vignette
<code>vignette("lifting-and-bridging", package = "SomaDataIO")</code>
for more details.</p>
    </div>
    <div class="section level2">
    <h2 id="lin-s-ccc">Lin's CCC<a class="anchor" aria-label="anchor" href="#lin-s-ccc"></a></h2>


<p>The Lin's Concordance Correlation Coefficient (CCC) is calculated
by computing the correlation between post-lift RFU values and the
RFU values generated on the original SomaScan version.
This CCC estimate is a measure of how well an analyte can be bridged
across SomaScan versions.
See <code>vignette("lifting-and-bridging", package = "SomaDataIO")</code>.
As with the lifting scalars, if you have an annotations file
you may view the analyte-specific CCC values via <code><a href="read_annotations.html">read_annotations()</a></code>.
Alternatively, <code><a href="adat-helpers.html">getSomaScanLiftCCC()</a></code> retrieves these values
from an internal object for both <code>"serum"</code> and <code>"plasma"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="analyte-setdiff">Analyte Setdiff<a class="anchor" aria-label="anchor" href="#analyte-setdiff"></a></h2>


<ul><li><p>Newer versions of SomaScan typically have additional content, i.e.
new reagents added to the multi-plex assay that bind to additional proteins.
When lifting <em>to</em> a previous SomaScan version, new reagents that do <em>not</em>
exist in the "earlier" assay version assay are scaled by 1.0, and thus
maintained, unmodified in the returned object. Users may need to drop
these columns in order to combine these data with a previous study
from an earlier SomaScan version, e.g. with <code><a href="loadAdatsAsList.html">collapseAdats()</a></code>.</p></li>
<li><p>In the inverse scenario, lifting "forward" <em>from</em> a previous, lower-plex
version, there will be extra reference values that are unnecessary
to perform the lift, and a warning is triggered. The resulting data
consists of RFU data in the "new" signal space, but with fewer analytes
than would otherwise be expected (e.g. <code>11k</code> space with only 5284
analytes; see example below).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Lin, Lawrence I-Kuei. 1989. A Concordance Correlation
Coefficient to Evaluate Reproducibility. <strong>Biometrics</strong>. 45:255-268.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># `example_data` is SomaScan (V4, 5k)</span></span></span>
<span class="r-in"><span><span class="va">adat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="fl">3L</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">adat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]    3 5318</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="adat-helpers.html">getSomaScanVersion</a></span><span class="op">(</span><span class="va">adat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "V4"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="adat-helpers.html">getSignalSpace</a></span><span class="op">(</span><span class="va">adat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "V4"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># perform 'lift'</span></span></span>
<span class="r-in"><span><span class="va">lift_11k</span> <span class="op">&lt;-</span> <span class="fu">lift_adat</span><span class="op">(</span><span class="va">adat</span>, <span class="st">"5k_to_11k"</span><span class="op">)</span>  <span class="co"># warning</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>There are extra scaling values (5799) in the reference.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> They will be ignored.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">is_lifted</span><span class="op">(</span><span class="va">lift_11k</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">lift_11k</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]    3 5318</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># attributes updated to reflect the 'lift'</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">lift_11k</span>, <span class="st">"Header"</span><span class="op">)</span><span class="op">$</span><span class="va">HEADER</span><span class="op">$</span><span class="va">SignalSpace</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "v5.0"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">lift_11k</span>, <span class="st">"Header"</span><span class="op">)</span><span class="op">$</span><span class="va">HEADER</span><span class="op">$</span><span class="va">ProcessSteps</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Raw RFU, Hyb Normalization, medNormInt (SampleId), plateScale, Calibration, anmlQC, qcCheck, anmlSMP, Lifting Bridge (5k -&gt; 11k)"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p><img src="../favicon-16x16.png"> SomaDataIO was developed by the Bioinformatics Dept. at <a href="http://www.standardbio.com" class="external-link">Standard BioTools, Inc.</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

